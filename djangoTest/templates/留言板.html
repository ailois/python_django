<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="/static/js/jquery-3.4.1.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
           $("#sub1").click(function () {
               var name = $("input[name=name]").val()
               var email = $("input[name=email]").val()
               var address = $("input[name=address]").val()
               var message = $("textarea[name=message]").val()
               alert("name="+name+"&email="+email+"&address="+address+"&message="+message)
               $.ajax({
                   url: "http://127.0.0.1:8000/留言板/update",
                   type : "POST",
                   data : "name="+name+"&email="+email+"&address="+address+"&message="+message,
{#				   cache : false,#}
{#				   processData : false,#}
{#				   contentType : false,#}
				   success : function(result) {
					   window.location.href="http://127.0.0.1:8000/留言板/show"
				   },
                   fail : function (res) {
                       alert(2);
                   }
               });
           });
        });

    </script>
</head>
<body>
<form action="/留言板/" method="post" class="smart-green">
    <h1>留言信息
        <span>请留下你的信息.</span>
    </h1>
    <label>
        <span>姓名 :</span>
        <input id="name" type="text" value="{{ my_message.name }}" name="name" class="error" placeholder="请输入您的姓名"/>
        <div class="error-msg"></div>
    </label>

    <label>
        <span>邮箱 :</span>
        <input id="email" type="email" value="{{ my_message.email }}" name="email" placeholder="请输入邮箱地址"/>
        <div class="error-msg"></div>
    </label>

    <label>
        <span>联系地址 :</span>
        <input id="address" type="text" value="{{ my_message.address }}" name="address" placeholder="请输入联系地址"/>
        <div class="error-msg"></div>
    </label>

    <label>
        <span>留言 :</span>
        <textarea id="message" name="message" placeholder="请输入你的建议">{{ my_message.message }}</textarea>
        <div class="error-msg"></div>
    </label>
    <div class="success-msg"></div>
    <label>
        <span>&nbsp;</span>
        <input type="submit" class="button" value="提交" id="sub"/>
        <input type="button" class="button" value="Ajax提交" id="sub1"/>
    </label>
{#    <input type='hidden' name='csrfmiddlewaretoken' value='SfHkbL4feo1G00sJQtbO7TtLN4c2BUwa' />#}
    {% csrf_token %}
</form>

</body>
</html>